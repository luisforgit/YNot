import React from 'react';
import { ScrollView, StyleSheet, View } from 'react-native';
import { Appbar, Chip, Text, FAB } from 'react-native-paper';
import { auth } from '../firebaseConfig';

export default function ViewNoteScreen({ navigation, route }) {
  const { note } = route.params;        // vem da navegação

  return (
    <>
      <Appbar.Header>
        <Appbar.BackAction onPress={() => navigation.goBack()} />
        <Appbar.Content title={note.title} />
        <Appbar.Action
          icon="pencil"
          onPress={() =>
            navigation.replace('EditNote', { note }) // replace para não voltar ao SeeNote
          }
        />
      </Appbar.Header>

      <ScrollView contentContainerStyle={styles.container}>
        {note.tags?.length > 0 && (
          <View style={styles.chips}>
            {note.tags.map((t) => (
              <Chip key={t} style={styles.chip}>
                {t}
              </Chip>
            ))}
          </View>
        )}

        <Text style={styles.content}>{note.content}</Text>
      </ScrollView>

      {/* FAB para voltar (opcional) */}
      <FAB
        icon="arrow-left"
        style={styles.fab}
        onPress={() => navigation.goBack()}
      />
    </>
  );
}

const styles = StyleSheet.create({
  container: { padding: 16 },
  chips: { flexDirection: 'row', flexWrap: 'wrap', marginBottom: 12 },
  chip: { marginRight: 6, marginBottom: 4 },
  content: { fontSize: 16, lineHeight: 24 },
  fab: { position: 'absolute', right: 16, bottom: 16 },
});